<ul>
    {% for language in site.data.snippets.languages %}
            {% unless language[1].slug == page.language %}
            {% assign translated_url = page.url | replace: page.language, language[1].slug %}
            {% for post in site.posts %}
                {% if post.url == translated_url %}
                    <li {% if language[1].slug == page.language %}class="current"{% endif %}>
                        <a href="{{ page.url | replace: page.language, language[1].slug | absolute_url }}">{{ language[1].value }}</a>
                    </li>
                {% endif %}
            {% endfor %}
        {% endunless %}
    {% endfor %}
</ul>